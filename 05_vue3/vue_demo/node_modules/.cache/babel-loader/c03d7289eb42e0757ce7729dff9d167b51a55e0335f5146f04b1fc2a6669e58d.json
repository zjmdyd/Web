{"ast":null,"code":"const copy = {\n  bind(el, {\n    value\n  }) {\n    el.$value = value; // 用一个全局属性来存传进来的值，因为这个值在别的钩子函数里还会用到\n    el.handler = () => {\n      if (!el.$value) {\n        // 值为空的时候，给出提示。可根据项目UI仔细设计\n        console.log('无复制内容');\n        return;\n      }\n      // 动态创建 textarea 标签\n      const textarea = document.createElement('textarea');\n      // 将该 textarea 设为 readonly 防止 iOS 下自动唤起键盘，同时将 textarea 移出可视区域\n      textarea.readOnly = 'readonly';\n      textarea.style.position = 'absolute';\n      textarea.style.left = '-9999px';\n      // 将要 copy 的值赋给 textarea 标签的 value 属性\n      textarea.value = el.$value;\n      // 将 textarea 插入到 body 中\n      document.body.appendChild(textarea);\n      // 选中值并复制\n      textarea.select();\n      const result = document.execCommand('Copy');\n      if (result) {\n        console.log('复制成功'); // 可根据项目UI仔细设计\n      }\n\n      document.body.removeChild(textarea);\n    };\n    // 绑定点击事件，就是所谓的一键 copy 啦\n    el.addEventListener('click', el.handler);\n  },\n  // 当传进来的值更新的时候触发\n  componentUpdated(el, {\n    value\n  }) {\n    el.$value = value;\n  },\n  // 指令与元素解绑的时候，移除事件绑定\n  unbind(el) {\n    el.removeEventListener('click', el.handler);\n  }\n};\nexport default copy;","map":{"version":3,"names":["copy","bind","el","value","$value","handler","console","log","textarea","document","createElement","readOnly","style","position","left","body","appendChild","select","result","execCommand","removeChild","addEventListener","componentUpdated","unbind","removeEventListener"],"sources":["/Users/issuser/Desktop/Project/Web/05_vue3/vue_demo/src/directives/copy.js"],"sourcesContent":["const copy = {\n  bind (el, { value }) {\n    el.$value = value // 用一个全局属性来存传进来的值，因为这个值在别的钩子函数里还会用到\n    el.handler = () => {\n      if (!el.$value) {\n        // 值为空的时候，给出提示。可根据项目UI仔细设计\n        console.log('无复制内容')\n        return\n      }\n      // 动态创建 textarea 标签\n      const textarea = document.createElement('textarea')\n      // 将该 textarea 设为 readonly 防止 iOS 下自动唤起键盘，同时将 textarea 移出可视区域\n      textarea.readOnly = 'readonly'\n      textarea.style.position = 'absolute'\n      textarea.style.left = '-9999px'\n      // 将要 copy 的值赋给 textarea 标签的 value 属性\n      textarea.value = el.$value\n      // 将 textarea 插入到 body 中\n      document.body.appendChild(textarea)\n      // 选中值并复制\n      textarea.select()\n      const result = document.execCommand('Copy')\n      if (result) {\n        console.log('复制成功') // 可根据项目UI仔细设计\n      }\n      document.body.removeChild(textarea)\n    }\n    // 绑定点击事件，就是所谓的一键 copy 啦\n    el.addEventListener('click', el.handler)\n  },\n  // 当传进来的值更新的时候触发\n  componentUpdated (el, { value }) {\n    el.$value = value\n  },\n  // 指令与元素解绑的时候，移除事件绑定\n  unbind (el) {\n    el.removeEventListener('click', el.handler)\n  }\n}\n\nexport default copy\n"],"mappings":"AAAA,MAAMA,IAAI,GAAG;EACXC,IAAI,CAAEC,EAAE,EAAE;IAAEC;EAAM,CAAC,EAAE;IACnBD,EAAE,CAACE,MAAM,GAAGD,KAAK,EAAC;IAClBD,EAAE,CAACG,OAAO,GAAG,MAAM;MACjB,IAAI,CAACH,EAAE,CAACE,MAAM,EAAE;QACd;QACAE,OAAO,CAACC,GAAG,CAAC,OAAO,CAAC;QACpB;MACF;MACA;MACA,MAAMC,QAAQ,GAAGC,QAAQ,CAACC,aAAa,CAAC,UAAU,CAAC;MACnD;MACAF,QAAQ,CAACG,QAAQ,GAAG,UAAU;MAC9BH,QAAQ,CAACI,KAAK,CAACC,QAAQ,GAAG,UAAU;MACpCL,QAAQ,CAACI,KAAK,CAACE,IAAI,GAAG,SAAS;MAC/B;MACAN,QAAQ,CAACL,KAAK,GAAGD,EAAE,CAACE,MAAM;MAC1B;MACAK,QAAQ,CAACM,IAAI,CAACC,WAAW,CAACR,QAAQ,CAAC;MACnC;MACAA,QAAQ,CAACS,MAAM,EAAE;MACjB,MAAMC,MAAM,GAAGT,QAAQ,CAACU,WAAW,CAAC,MAAM,CAAC;MAC3C,IAAID,MAAM,EAAE;QACVZ,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC,EAAC;MACtB;;MACAE,QAAQ,CAACM,IAAI,CAACK,WAAW,CAACZ,QAAQ,CAAC;IACrC,CAAC;IACD;IACAN,EAAE,CAACmB,gBAAgB,CAAC,OAAO,EAAEnB,EAAE,CAACG,OAAO,CAAC;EAC1C,CAAC;EACD;EACAiB,gBAAgB,CAAEpB,EAAE,EAAE;IAAEC;EAAM,CAAC,EAAE;IAC/BD,EAAE,CAACE,MAAM,GAAGD,KAAK;EACnB,CAAC;EACD;EACAoB,MAAM,CAAErB,EAAE,EAAE;IACVA,EAAE,CAACsB,mBAAmB,CAAC,OAAO,EAAEtB,EAAE,CAACG,OAAO,CAAC;EAC7C;AACF,CAAC;AAED,eAAeL,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}